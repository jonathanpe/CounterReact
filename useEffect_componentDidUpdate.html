<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Hello React</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>

    <style>
   
    </style>
</head>

<body>
    <div id="root"></div>
    <script type="text/babel">

        const Counter = ()=> {
                const [ count, setCount ] = React.useState(0);
                const [ interval, setMyInterval ] = React.useState(0);

                 React.useEffect(() => {
                     console.log(count)


                    return () => {
                        console.log('test')
                    }

                 }, [count]) 

                const launchCounter = () => {   
                    setCount(0)     
                    setMyInterval(
                        setInterval(()=>{
                            clearInterval(interval)
                            setCount(count=>count+1);
                            console.log('test')
                            },1000))
                }
                const stop = () => setMyInterval(clearInterval(interval))

                return (
                    <div>
                        <div>Counter : {count}</div>
                        <button onClick={launchCounter}>Start / Restart</button>
                        <button onClick={stop}>Stop</button>
                    </div>
                )
            }
        const App = ({title, message}) => {
            const [ count, setCount ] = React.useState(0);
            const [ display, setDisplay ] = React.useState(false); 

            React.useEffect(() => {

            },[display])

            const displayer = () => {                
                setDisplay(!display)
            }



            // life cycle
            // componentDidMount, componentDidUpdate, componentWillUnmount
            /*React.useEffect(() => {

                return () => {
                    console.log('umount...')
                }

            }, [count]) // cible un ou des state, si rien useEffect ne s'ex√©cute qu'au montage componentDidMount
*/



                return (
                <div>
                    <button onClick={displayer}>Toggle counter</button>
                    {display && <Counter />}     
                </div>
            );

        }

        const container = document.getElementById('root');


        ReactDOM.render(
            <App title = "Hello React" message ="Super les hooks" />,
            container
        );


    </script>
</body>

</html>